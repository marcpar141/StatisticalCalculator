package pl.polsl.marceli.parandyk.model;

import org.junit.Test;
import pl.polsl.marceli.parandyk.exceptions.EmptyListException;
import pl.polsl.marceli.parandyk.exceptions.WrongFormatOfDataException;

import static org.junit.Assert.*;

public class ModelTest {

    final String testData = "355,177680961788;60,0083989556879;967,965804506093;337,919649900869;294,66819902882;979,569881455973;536,063499981537;174,367916537449;450,857697287574;457,540634321049;269,506233744323;594,687225762755;549,639380071312;825,872496701777;15,4347729403526;484,444904141128;526,639466406778;719,993118895218;191,517963306978;94,9637063313276;71,9302492216229;366,077006794512;419,793968088925;166,519344551489;672,33082279563;435,510382521898;392,475430853665;774,265492334962;249,399056658149;985,535576241091;897,210333496332;335,06391546689;623,7381210085;281,467269873247;507,568801287562;178,599402075633;223,336457042024;189,159299246967;955,811446532607;218,833581078798;49,8450105078518;438,618184998631;638,344241073355;833,643927471712;593,184289289638;732,688441639766;560,097368434072;96,2298403028399;257,524349493906;155,936444178224;608,732861233875;591,307686176151;43,9701303839684;495,575168868527;53,8428996223956;111,659883055836;597,765960963443;113,898892886937;106,344155734405;434,814736014232;902,2356136702;848,457344342023;255,719917826355;326,970513910055;303,779180860147;786,879802122712;321,646423544735;417,788711143658;388,6459171772;622,164690168574;398,997660027817;263,958250870928;201,490461127833;442,498223856091;493,507746141404;45,6617288291454;276,355060283095;6,33860100060701;565,505053615198;342,281456803903;918,354782043025;605,535550508648;10,4311122559011;783,558629220352;997,154837241396;112,93149064295;965,315298410133;504,320176318288;379,44105733186;703,537923516706;90,9826755523682;177,855625282973;726,943888003007;174,417510163039;360,577648738399;45,9259953349829;2,71704304032028;550,805476959795;623,139866394922;522,092839702964;176,276032347232;421,505511039868;686,432939954102;755,191025789827;231,176646891981;161,086415871978;190,857340348884;836,813711794093;116,715539945289;972,731401212513;95,3900634776801;513,558695791289;911,552777281031;630,781434942037;712,976597482339;528,786879498512;557,463718345389;280,319236684591;499,927981523797;855,048320489004;976,139723090455;333,257964812219;475,95662297681;78,8111935835332;12,281731935218;807,186390971765;707,229402149096;873,486916767433;480,813221307471;923,947411589324;983,055732212961;492,733530933037;478,600815171376;793,724099406973;228,706975467503;716,169439954683;508,672752417624;619,287875946611;302,899206755683;370,293813757598;474,30597548373;544,092096854001;26,6652612481266;281,759596429765;852,329063694924;356,87715257518;747,459480306134;495,870658196509;101,297416491434;40,5826305504888;21,4459314011037;516,085390932858;531,070689670742;338,913228362799;835,24911897257;680,890581570566;262,704837368801;738,636242458597;145,399452652782;63,6264074128121;555,98327703774;624,761315295473;63,2210921030492;219,974367879331;408,032624982297;864,678394747898;572,409502230585;280,092604691163;690,915690967813;987,989766523242;982,945286901668;417,265972588211;722,290310077369;566,87672319822;151,507456786931;531,965393107384;254,948094021529;271,956759272143;720,791924279183;239,985437365249;35,0815854035318;927,990831201896;44,4852143991739;405,32799391076;203,082067426294;430,325319292024;830,762353958562;868,063473142684;681,928962934762;729,78742304258;331,386589678004;74,0520311519504;966,661632526666;73,2022814918309;151,137058855966;634,856649208814;461,70599735342;475,40351934731;319,830320309848;51,448336802423;734,602697426453;723,724290262908;657,016981160268;125,874786870554;666,568319080397;102,082084864378;338,485858868808;765,97127947025;849,45272654295;589,912828058004;817,527361679822;722,57466847077;878,798954421654;926,30716226995;169,438605662435;520,329950144514;363,279693759978;385,456972988322;864,236535737291;215,851216111332;748,210568679497;927,774092648178;723,2474766206;97,3089123144746;128,0224211514;943,718224996701;550,284415017813;685,872251167893;242,912247078493;55,7772032916546;239,802414318547;108,97077457048;865,610312437639;543,955234112218;972,916587023064;559,229743434116;191,942575853318;672,851512441412;907,650161068887;554,74047223106;513,320410856977;854,957561474293;206,149440025911;349,769979948178;532,080676406622;118,016486056149;153,251472627744;637,211056193337;210,451452527195;889,030544320121;484,29077048786;82,2130844462663;44,1575688309968;65,0602176319808;218,717528274283;147,891530999914;399,964644340798;880,256665172055;365,580714307725;936,059034662321;415,109964087605;748,239375185221;319,138390012085;102,067866828293;617,594884242862;962,159922113642;705,048742238432;407,481378410012;162,440201733261;462,652180809528;241,950304945931;390,673148445785;346,193617908284;387,780067045242;379,124740604311;180,513822240755;983,110310975462;372,229879489169;395,167560549453;788,133333902806;360,340148909017;543,868819251657;754,273891914636;152,174579678103;917,692369781435;472,497382899746;531,740803504363;853,928573662415;53,1609654426575;361,286211293191;141,639426350594;434,613472083583;508,802278200164;635,671681957319;680,787617806345;562,605671351776;25,4324534907937;193,170451559126;832,665301160887;617,433096282184;935,805828310549;417,655989527702;668,007726315409;931,777626043186;396,378946723416;815,517747309059;282,55111980252;843,823574017733;46,3697684463114;536,794940242544;922,282924875617;378,587017767131;0,804379815235734;989,706361666322;777,689914917573;627,772651379928;550,752706592903;33,0608107615262;49,638022435829;713,192028459162;792,952912161127;453,466534614563;330,477022333071;329,557891469449;820,566486101598;6,3574246596545;38,2067761383951;525,521538453177;263,078303076327;198,20433924906;877,00624181889;45,7722023129463;63,640951178968;718,281521461904;30,7952787261456;283,895661123097;41,6367442812771;762,427572626621;968,00906653516;954,663487849757;500,570398755372;156,94007021375;606,653661699966;65,4641571454704;946,766942040995;674,249162198976;559,947963338345;329,16457625106;318,38595494628;380,324207479134;955,786400008947;36,7100376170129;560,553899267688;127,718089846894;84,1844736132771;604,371061548591;640,779502457008;123,007249552757;303,418192546815;571,192837087438;906,500427285209;14,0420310199261;656,314043328166;944,073768332601;477,391028311104;76,1276765260845;271,003348752856;693,744336953387;322,209381032735;83,3360326942056;736,588770989329;544,223006581888;964,728877646849;249,560012016445;986,709497869015;276,349783409387;267,872602446005;945,088722743094;269,30768834427;641,569419996813;383,313392288983;970,268064411357;762,016602326185;964,030255097896;323,165179463103;918,010073015466;642,293939599767;587,14722446166;514,389923540875;996,519576525316;39,6008573006839;954,926084261388;985,386418644339;78,2008820679039;221,002072095871;663,339398335665;383,511138381436;582,576129818335;443,718634778634;611,943250522017;595,034588128328;707,318149274215;332,829297753051;687,941567739472;209,446372231469;824,935367330909;38,8329760171473;815,714026102796;841,804089955986;499,110882403329;341,537304921076;675,803989404812;790,342753520235;558,169758645818;37,291276268661;375,5902282428;186,008047079667;922,621191013604;784,018454607576;510,414641816169;128,707183524966;478,831266751513;211,766434367746;187,799429986626;388,575945049524;941,437287256122;650,071472860873;298,910294426605;979,595194803551;290,783903794363;924,505260074511;943,902150029317;409,833666170016;85,7596807181835;146,375854732469;37,6569696236402;251,549818087369;298,084964277223;255,950684659183;75,154596939683;177,234666189179;82,7461972367018;182,17946914956;645,555965835229;229,487220523879;978,641104185954;336,411573225632;95,5166385974735;172,569498652592;857,650373363867;812,390977051109;969,590258784592;330,216710222885;533,41372939758;290,381284663454;778,465690324083;362,176438095048;355,671106139198;68,6978867743164;865,265290951356;957,973734242842;787,905662320554;118,160930462182;128,170399926603;241,648678202182;718,187619466335;444,835314759985;913,520835572854;19,5270378608257;144,602745538577;124,706136062741;392,907987348735;755,821004742756;90,2397893369198;660,642557544634;444,852868793532;544,116101460531;540,313868317753;168,137390865013;107,770479284227;925,13675824739;745,22764631547;338,603027397767;510,729948058724;771,058836020529;592,517099808902;256,4169713296;169,292132835835;657,745338045061;239,58809254691;526,523720938712;697,383926948532;482,622651383281;325,071129482239;636,328042019159;925,871368264779;301,347413333133;154,20639119111;691,345447907224;45,9520688746125;106,044627726078;629,482712363824;870,804002508521;162,000773940235;315,687937196344;575,412790291011;449,021918699145;566,384881036356;378,76947876066;386,821130057797;187,886523548514;57,8898917883635;83,6028466001153;269,338267389685;52,7212156448513;889,93115676567;353,025085059926;94,967306824401;104,948646156117;470,756623195484;182,890628231689;826,004250207916;61,5008240565658;441,205975832418;738,690223777667;896,749344421551;110,934088239446;622,229401720688;591,869100462645;567,690392257646;935,84594479762;323,958370601758;106,658371165395;494,713274296373;199,460759758949;258,161620702595;152,832912281156;460,592537885532;678,207072196528;396,896038670093;270,193960051984;886,823100503534;897,478684317321;454,959271242842;918,143292656168;600,017589749768;956,133175641298;891,3910666015;221,588956657797;665,58385733515;218,289426527917;246,939865639433;628,891809144989;178,606521105394;357,309602899477;403,489397605881;632,155313855037;76,3743999414146;499,120499705896;104,679763549939;883,368119830266;814,520966727287;369,835848221555;882,209164788947;926,687095314264;826,05011574924;205,529883736745;858,219887595624;765,071583911777;367,20105772838;865,969608770683;956,828422378749;553,764308104292;237,837783060968;314,391653286293;405,904558952898;747,9476518929;533,942732727155;451,729309977964;609,848171239719;456,229018047452;102,3028222844;832,984654931352;132,558187237009;763,763428665698;110,651618801057;514,282725984231;386,345632607117;509,321269346401;401,134156156331;586,917974054813;474,007792770863;999,714724486694;809,105642139912;557,563014794141;693,382512312382;979,705708799884;29,8854324501008;115,763039328158;16,7573057115078;382,627378450707;633,231981657445;960,959874792024;706,041059689596;537,765426328406;278,501444263384;529,728679684922;231,348799541593;468,133277026936;532,313506118953;671,595084946603;670,606767525896;724,444181192666;551,489370176569;727,218879153952;455,519654555246;60,2535344660282;420,3640462365;882,808620575815;670,599141158164;389,657949097455;326,587625779212;755,520464619622;732,962776906788;453,888153657317;726,108267204836;473,910377593711;819,477368146181;343,212441308424;81,8993027787656;345,872591948137;511,291029164568;870,074949692935;999,363393289968;292,099039535969;871,618715580553;353,775502648205;705,915980041027;564,936818787828;203,634983627126;814,661726821214;203,132858732715;67,4667779821903;786,414264468476;521,260389592499;808,859374839813;871,330650290474;863,38579445146;363,758279709145;516,980240121484;823,143423069268;568,040835205466;921,67346784845;726,273451233283;871,688119368628;700,00208588317;489,919082261622;423,931313911453;167,579200351611;767,132880864665;862,168199149892;582,608899101615;470,682189334184;182,87213658914;303,225541952997;205,992226721719;7,58237577974796;482,521383557469;256,140727782622;119,939618511125;439,915637020022;54,3293270748109;296,941284555942;576,276266016066;939,33794205077;881,245491094887;212,521129054949;491,248228121549;600,175184663385;246,649310691282;261,006447020918;581,250333925709;195,863272529095;95,2172328252345;786,89300082624;801,217044238001;112,349031493068;836,53697441332;326,762358425185;145,596245769411;540,426073363051;275,981017155573;524,670877261087;243,258698610589;923,553630011156;986,635210458189;939,554995391518;253,931194078177;311,606146162376;192,084241192788;504,277767846361;76,5282304491848;556,979503948241;817,771492060274;144,590562675148;112,513032741845;822,702179197222;188,207590021193;772,091281833127;429,259490920231;138,130098115653;589,346076594666;325,418472057208;417,444489197806;298,739077989012;365,651516243815;23,2178745791316;64,4961250945926;124,800713500008;560,836424352601;233,800034504384;124,498675810173;894,130469765514;784,806995419785;422,082352917641;357,313509099185;838,232533074915;328,989686211571;161,912566050887;938,230533851311;72,2931902855635;382,319817552343;417,252704733983;1,90660706721246;811,773077817634;491,463755490258;691,481245914474;340,850531123579;854,607242858037;425,536744762212;280,864165630192;256,324301008135;318,385174497962;991,301133297384;53,8269660901278;698,233066126704;227,422884199768;476,031832164153;574,061988387257;391,673712758347;926,831766264513;187,557754805312;501,732378499582;279,05425382778;653,871872695163;65,8592935651541;40,6834858004004;177,993220277131;902,791761094704;543,120983056724;716,36710409075;271,126664476469;385,346804978326;980,031844926998;396,051549585536;932,914906879887;590,588434366509;872,67351639457;281,6842708271;974,302629940212;928,60969947651;888,306923909113;327,324636979029;46,4214822277427;511,280986014754;850,736362626776;686,436515767127;663,177079986781;134,132936829701;788,938551209867;728,906311327592;254,902839660645;417,487163096666;122,166967950761;382,409060141072;628,637558780611;786,925022257492;260,307809570804;41,273967595771;824,729978106916;807,323561282828;271,758125396445;989,690970629454;652,309857076034;148,44001759775;930,776464985684;149,335430469364;465,705228270963;69,7484312113374;754,398235585541;760,081013431773;578,090381342918;224,66552327387;271,584830014035;98,212888231501;352,538239210844;569,186956388876;871,790399076417;409,527961863205;183,916173409671;127,220302121714;475,152333965525;501,413483405486;993,67504986003;462,909121066332;938,452171860263;812,832201598212;47,0596661325544;706,540705868974;500,007554190233;542,279179673642;814,613429130986;841,166919330135;332,809248240665;491,373553406447;339,203249895945;801,156304078177;702,787587884814;608,33895415999;635,615614475682;496,072369394824;516,105071641505;107,088176999241;0,710915541276336;347,224087454379;249,949767719954;77,4747750256211;604,146968806162;600,786960450932;981,460864422843;141,265433048829;674,813473364338;700,445550493896;891,326596960425;690,2132446412;68,5512281488627;824,952186318114;605,620627757162;233,455672860146;420,138916466385;841,349848080426;360,706870211288;517,391728470102;551,340089878067;816,951187793165;57,4872614815831;428,861282533035;841,415281174704;7,54685676656663;224,370198091492;477,302873739973;339,769036509097;79,7482691705227;585,674854228273;10,7470136135817;490,545558976009;523,987780092284;205,144164850935;108,152731787413;775,026283692569;673,846060410142;510,792213259265;278,411129722372;164,8350416217;788,202746072784;916,561809368432;294,472549576312;83,2433465402573;544,303961796686;125,564796617255;377,632705727592;771,026369184256;897,780146682635;812,02056328766;804,235121002421;994,166702963412;217,510113026947;480,869133025408;102,990681072697;258,808213751763;650,810376508161;669,923988170922;704,303616192192;161,9644286111;606,385421473533;722,685718210414;118,881137110293;75,1494613941759;50,9133981540799;628,706641262397;578,203435754403;930,425998056307;702,142257709056;258,892678655684;614,073419012129;518,398499349132;592,605238081887;257,643956691027;333,859893726185;484,897346002981;186,595409875736;348,710501100868;634,914304595441;441,040311707184;363,714033970609;750,905383611098;927,639303030446;573,95614287816;255,53710735403;227,133379550651;61,7093769833446;918,489429168403;779,881071764976;490,092744585127;408,48503424786;693,913404364139;185,506639070809;583,636680850759;603,896472370252;447,238511871547;334,622110240161;979,540413012728;734,678608132526;264,939836924896;568,80119512789;639,111823635176;424,158511683345;217,452630167827;587,709737708792;227,269768249243;227,614841191098;417,026702780277;280,078392941505;497,251158813015;812,541935127228;686,422362457961;59,4469031784683;363,735020859167;384,020525030792;439,374043373391;495,608733501285;706,656507449225;215,657422551885;423,970448086038;222,528955666348;111,679916735739;609,225945314392;925,829017534852;773,379958700389;94,4157503545284;677,123004803434;578,278160188347;137,61905930005;317,066173069179;902,741600992158;80,5049971677363;77,210299205035;209,788407664746;736,485518282279;23,4970534220338;291,991603327915;367,572701536119;320,247440366074;175,157354446128;56,7629304714501;236,91180231981;989,944954169914;329,40215151757;892,690756358206;714,53691017814;634,282843442634;424,36503758654;271,030929870903;249,766793102026;604,219129541889;734,519651159644;162,401784677058;759,780491003767;453,902323031798;678,283478366211;476,622280431911;160,024372627959;297,502114437521;246,262301225215;785,441001178697;595,415009418502;9,43333213217556;177,92300414294;106,259460095316;433,329652994871;";

    @Test
    public void setDataShouldComplete() {
        Model model = new Model();
        try {
            model.setData(testData);
        } catch (WrongFormatOfDataException ex) {
            fail("Should set data");
            return;
        }
        assertTrue(true);
    }

    @Test
    public void setDataShouldFailWhenInitializingWithWrongArguments() {
        Model model = new Model();
        try {
            model.setData("1;20;a");
        } catch (WrongFormatOfDataException ex) {
            assertTrue(true);
            return;
        }
        fail("Should throw exception with wrong arguments");
    }

    @Test
    public void shouldThrowExceptionWhenWrongDataFormatProvided() {
        Model model = new Model();
        try {
            model.setData("1;20;15,0");
        } catch (WrongFormatOfDataException ex) {
            fail("Should set data");
            return;
        }
        assertTrue(true);
    }

    @Test
    public void shouldCalculateCorrectly() {
        Model model = new Model();
        try {
            model.setData(testData);
            model.calculate();
            assertEquals(model.getAvg(), 477.2104, 0.0001);
            assertEquals(model.getStd(), 285.47, 0);
            assertEquals(model.getMd(), 474.156, 0.001);
        } catch (WrongFormatOfDataException ex) {
            fail("Should complete successfully, wrong format of arguments");
        } catch (EmptyListException ex) {
            fail("Should complete succesfully, list was empty");
        }
    }

    @Test
    public void shouldThrowExceptionWhenReadingAverage() {
        Model model = new Model();
        try {
            model.setData("");
            model.calculate();
            assertEquals(model.getAvg(), 477.2104, 0.0001);
            assertEquals(model.getStd(), 285.47, 0);
            assertEquals(model.getMd(), 474.156, 0.001);
        } catch (WrongFormatOfDataException ex) {
            fail("Should complete successfully, wrong format of arguments");
        } catch (EmptyListException ex) {
            fail("Should complete successfully");
        } catch (IndexOutOfBoundsException ex) {
            assertTrue(true);
            return;
        }
        fail("Should complete succesfully, list was empty");
    }

}